# Getting and Cleaning Data

### Course Project

## _**Code Book**_



#### Objective :-
The objective of this project is to prepare a tidy dataset with the average of the selected variables, namely 'mean' and 'standard deviation' for each of the features of the original input data set,  for each activity performed by each of the volunteers involved.


#### Data :-
The raw data that was taken as input for the course project was obtained from the following site -
[UCI Machine Learning Repository](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones )

The original data for the project  is available here - [UCI HAR Dataset](https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip)


#### Experiment :-
This data contains the results of an experiment conducted to obtain a Human Activity Recognition database, in which 30 volunteers performed 6 basic daily activities, wearing a Samsung Galaxy SII smartphone on the waist.
The embedded accelerometer and gyroscope in the smartphone, was used to capture 3-axial linear acceleration and 3-axial angular velocity at a constant rate of 50Hz. The obtained dataset has been randomly partitioned into two sets, where 70% of the volunteers was selected for generating the training data and 30% the test data. 

The sensor signals (accelerometer and gyroscope) were pre-processed by applying noise filters and then sampled in fixed-width sliding windows of 2.56 sec and 50% overlap (128 readings/window). The sensor acceleration signal, which has gravitational and body motion components, was separated using a Butterworth low-pass filter into body acceleration and gravity. The gravitational force is assumed to have only low frequency components, therefore a filter with 0.3 Hz cutoff frequency was used. From each window, a vector of features was obtained by calculating variables from the time and frequency domain. 

The activities performed, in order, were - walking, walking upstairs, walking downstairs, sitting, standing, laying.

#### Features :-
The features selected in this project, were collected form the original database, which were estimated from the accelerometer and gyroscope 3-axial raw signals, *'tAcc-XYZ'* and *'tGyro-XYZ'*. These time domain signals (prefix 't' to denote time) were captured at a constant rate of 50 Hz, and filtered using a median filter and a 3rd order low pass Butterworth filter with a corner frequency of 20 Hz to remove noise.
'-XYZ' denotes 3-axial signals in the X, Y and Z directions, respectively.

The acceleration signal was then separated into body and gravity acceleration signals, *'tBodyAcc-XYZ'* and *'tGravityAcc-XYZ'* using another low pass Butterworth filter with a corner frequency of 0.3 Hz. 

The body linear acceleration and angular velocity were derived in time to obtain the signals, *'tBodyGyro-XYZ'*, *'tBodyAccJerk-XYZ'*,  and
*'tBodyGyroJerk-XYZ'*.

The magnitude of these three-dimensional signals were calculated using the Euclidean norm, to obtain the variables, *'tBodyAccMag'*, 
*'tGravityAccMag'*, *'tBodyAccJerkMag'*, *'tBodyGyroMag'* and *'tBodyGyroJerkMag'*. 

A Fast Fourier Transform (FFT) was applied to some of these signals to produce *'fBodyAcc-XYZ'*, *'fBodyAccJerk-XYZ'*, *'fBodyGyro-XYZ'*, 
*'fBodyAccJerkMag'*, *'fBodyGyroMag'*, and *'fBodyGyroJerkMag'*  (prefix 'f' to denote frequency). 

The features are normalized and bounded within **[-1,1]**.

The set of variables that were estimated from these signals are - 

> - mean(): Mean value
> - std(): Standard deviation
> - mad(): Median absolute deviation 
> - max(): Largest value in array
> - min(): Smallest value in array
> - sma(): Signal magnitude area
> - energy(): Energy measure. Sum of the squares divided by the number of values. 
>- iqr(): Interquartile range 
> - entropy(): Signal entropy
> - arCoeff(): Autorregresion coefficients with Burg order equal to 4
> - correlation(): correlation coefficient between two signals
> - maxInds(): index of the frequency component with largest magnitude
> - meanFreq(): Weighted average of the frequency components to obtain a mean frequency
> - skewness(): skewness of the frequency domain signal 
> - kurtosis(): kurtosis of the frequency domain signal 
> - bandsEnergy(): Energy of a frequency interval within the 64 bins of the FFT of each window.
> - angle(): Angle between following vectors, additionally generated by averaging over a single window -
      - gravityMean
      - tBodyAccMean
      - tBodyAccJerkMean
      - tBodyGyroMean
      - tBodyGyroJerkMean


#### Procedure :-

> 1. The training and test data sets were merged to form a single data set and stacked together. 
> 2. The measurements of the variables 'mean()' and 'std()' were selected along with the columns for subject and activity.
> 3. Descriptive variable names were assigned to the columns individually, as the original column names were erroneous and untidy.
> 4. The activity IDs were replaced by descriptive activity names, as in the original experiment.
> 5. The data set was arranged and and the _**average**_ value for each column/variable, for each subject performing each of the activities was 
      calculated, and stored in a tidy data set in the wide format.



#### Variables :-
The original experiment yielded 561 variables estimated on each of the features or signals obtained in the experiment.

In this project, only the required variables, namely the measurements of **mean()** and **std()**,i.e. 'mean' and 'standard deviation', were considered, which have been calculated/estimated independently for each of the features, and for each of the directions independently, in case of the 3-axial signals.
Also independent variable columns for "Subject" and "Activity" were associated along with the 66 variables representing only the 'mean' and 'std' measurements of the feature vectors.

"Subject" is an integer vector with 30 unique values, and "Activity" is transformed into a factor with 6 levels.

After the selection of the required variables, the original variable names, obtained along with the experiment data set, were transformed to make them more descriptive and clearer, and refer the feature vectors they represented. The steps taken to transform these variables are as follows -

> 1. The original names of the feature vectors, obtained with the data set were replaced by descriptive and tidier labels. Characters present in the
     original data set, such as '()' and '-', were removed, as they are erroneous and make the names difficult to understand and untidy.
> 2. Duplicated variable names were made unique.
> 3. Words repeated within the variable names were edited to be included only once.
> 4  The indexes for the axes (X, Y, Z) were added to the axial feature vectors, for clearer understanding of the directions of the vectors.
> 5. The terms 'mean' and 'std' were added to the variable names, according to their requirement, for better referantiality of the considered variables
     on the feature vectors.
> 6. The underscore character was used between the feature (eg.-tBodyAcc) and the axis identifier (eg.-X/Y/Z), and also in between the feature vector and the
     variable (eg.-mean), to allow easier reading of the column names in the data set, and more detailed names (eg.-tBodyAcc_X_mean). 
    
```
List of the 68 variables :-

 [1]  Subject                 (integer)             
 [2]  Activity                (factor, 6 levels : "WALKING","WALKING_UPSTAIRS","wALKING_DOWNSTAIRS","SITTING","STANDING","LAYING")           
 [3]  tBodyAcc_X_mean         (numeric)     
 [4]  tBodyAcc_Y_mean         (numeric)    
 [5]  tBodyAcc_Z_mean         (numeric)     
 [6]  tGravityAcc_X_mean      (numeric)
 [7]  tGravityAcc_Y_mean      (numeric)
 [8]  tGravityAcc_Z_mean      (numeric)  
 [9]  tBodyAccJerk_X_mean     (numeric)
 [10] tBodyAccJerk_Y_mean     (numeric)
 [11] tBodyAccJerk_Z_mean     (numeric)
 [12] tBodyGyro_X_mean        (numeric)
 [13] tBodyGyro_Y_mean        (numeric)    
 [14] tBodyGyro_Z_mean        (numeric)    
 [15] tBodyGyroJerk_X_mean    (numeric)
 [16] tBodyGyroJerk_Y_mean    (numeric)
 [17] tBodyGyroJerk_Z_mean    (numeric)
 [18] tBodyAccMag_mean        (numeric)    
 [19] tGravityAccMag_mean     (numeric)
 [20] tBodyAccJerkMag_mean    (numeric)
 [21] tBodyGyroMag_mean       (numeric)
 [22] tBodyGyroJerkMag_mean   (numeric)
 [23] fBodyAcc_X_mean         (numeric)      
 [24] fBodyAcc_Y_mean         (numeric)      
 [25] fBodyAcc_Z_mean         (numeric)      
 [26] fBodyAccJerk_X_mean     (numeric)
 [27] fBodyAccJerk_Y_mean     (numeric)
 [28] fBodyAccJerk_Z_mean     (numeric) 
 [29] fBodyGyro_X_mean        (numeric)    
 [30] fBodyGyro_Y_mean        (numeric)    
 [31] fBodyGyro_Z_mean        (numeric)    
 [32] fBodyAccMag_mean        (numeric)   
 [33] fBodyAccJerkMag_mean    (numeric) 
 [34] fBodyGyroMag_mean       (numeric)    
 [35] fBodyGyroJerkMag_mean   (numeric)
 [36] tBodyAcc_X_std          (numeric)      
 [37] tBodyAcc_Y_std          (numeric)      
 [38] tBodyAcc_Z_std          (numeric)      
 [39] tGravityAcc_X_std       (numeric)    
 [40] tGravityAcc_Y_std       (numeric)  
 [41] tGravityAcc_Z_std       (numeric)   
 [42] tBodyAccJerk_X_std      (numeric)   
 [43] tBodyAccJerk_Y_std      (numeric)  
 [44] tBodyAccJerk_Z_std      (numeric)  
 [45] tBodyGyro_X_std         (numeric)      
 [46] tBodyGyro_Y_std         (numeric)      
 [47] tBodyGyro_Z_std         (numeric)    
 [48] tBodyGyroJerk_X_std     (numeric)  
 [49] tBodyGyroJerk_Y_std     (numeric)
 [50] tBodyGyroJerk_Z_std     (numeric) 
 [51] tBodyAccMag_std         (numeric)      
 [52] tGravityAccMag_std      (numeric)  
 [53] tBodyAccJerkMag_std     (numeric)  
 [54] tBodyGyroMag_std        (numeric)    
 [55] tBodyGyroJerkMag_std    (numeric)
 [56] fBodyAcc_X_std          (numeric)     
 [57] fBodyAcc_Y_std          (numeric)      
 [58] fBodyAcc_Z_std          (numeric)      
 [59] fBodyAccJerk_X_std      (numeric)  
 [60] fBodyAccJerk_Y_std      (numeric)  
 [61] fBodyAccJerk_Z_std      (numeric)  
 [62] fBodyGyro_X_std         (numeric)      
 [63] fBodyGyro_Y_std         (numeric)    
 [64] fBodyGyro_Z_std         (numeric)     
 [65] fBodyAccMag_std         (numeric)      
 [66] fBodyAccJerkMag_std     (numeric)  
 [67] fBodyGyroMag_std        (numeric)    
 [68] fBodyGyroJerkMag_std    (numeric)
```


#### Results :-
A tidy data set was obtained in the **wide** format, which confirmed to the general rules for tidy data, as explained during the course of the class, and as stated originally by Hadley Wickham in his paper on [Tidy Data](http://vita.had.co.nz/papers/tidy-data.html).

```
  The data set conforms to the following 'tidy data' principles :-
    1. Each variable measured is in one column.
    2. Each different observation of each variable is in a different row.
    3. There is a single table for each kind of data.
```
  
The tidy data set obtained, has -

> - 181 rows ((30 subjects * 6 activities)+ Header row (variable names))
> - 68 columns (Individual columns for Subject ID and Activity Label, and 66 columns for the 66 variables used)
    
The tidy data set obtained is written out to a text file "tidy_data.txt".

A 'README' document is created to document the process and code applied.

The code script "run_analysis.R", is stored, for record and further usage. 